<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2025 年薪隨手記</title>
    <!-- 引入 React, Babel (解析 JSX) 與 Tailwind CSS -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 引入 Lucide 圖示庫 -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { -webkit-tap-highlight-color: transparent; }
        /* 隱藏 Chrome/Safari 的數字輸入框箭頭 */
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        // 模擬 Lucide 圖示組件
        const Icon = ({ name, size = 16, className = "" }) => {
            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            }, [name]);
            return <i data-lucide={name} style={{ width: size, height: size }} className={className}></i>;
        };

        const MiniInput = ({ label, value, icon, color, onChange, unit = "TWD" }) => (
            <div className="flex items-center gap-2 bg-white p-2 rounded-xl border border-gray-100 shadow-sm focus-within:ring-1 focus-within:ring-blue-400">
                <Icon name={icon} size={14} className={color} />
                <div className="flex-1">
                    <div className="text-[10px] text-gray-400 leading-none mb-1">{label}</div>
                    <div className="relative flex items-center">
                        <input
                            type="number"
                            value={value === 0 ? '' : value}
                            onChange={(e) => onChange(e.target.value)}
                            className={`w-full font-bold text-sm bg-transparent outline-none ${value < 0 ? 'text-red-500' : 'text-slate-700'}`}
                            placeholder="0"
                        />
                        <span className="text-[9px] text-gray-300 ml-1 whitespace-nowrap">{unit}</span>
                    </div>
                </div>
            </div>
        );

        const App = () => {
            const [finances, setFinances] = useState({
                main: 0, pet: 0, beauty: 0, btc: 0, tw: 0, us: 0
            });
            const [days, setDays] = useState({ work: 0, travel: 0, source: 0 });

            const handleFin = (key, val) => setFinances(p => ({ ...p, [key]: val === '' ? 0 : parseFloat(val) }));
            const handleDay = (key, val) => setDays(p => ({ ...p, [key]: val === '' ? 0 : parseInt(val) }));

            const total = useMemo(() => Object.values(finances).reduce((a, b) => a + b, 0), [finances]);
            const daily = useMemo(() => (days.work + days.source) > 0 ? total / (days.work + days.source) : 0, [total, days]);

            const fmt = (v) => new Intl.NumberFormat('zh-TW', { style: 'currency', currency: 'TWD', maximumFractionDigits: 0 }).format(v);

            return (
                <div className="h-screen bg-slate-50 flex flex-col p-3 overflow-hidden font-sans">
                    {/* 頂部總覽 */}
                    <header className="flex items-center justify-between bg-blue-600 p-4 rounded-2xl shadow-lg text-white mb-3 flex-shrink-0">
                        <div>
                            <h1 className="text-xs font-bold opacity-80 uppercase tracking-widest">2025 年薪總計</h1>
                            <div className="text-2xl font-black tracking-tight">{fmt(total)}</div>
                        </div>
                        <div className="text-right border-l border-blue-400/50 pl-4">
                            <div className="text-[10px] opacity-80 font-bold uppercase">平均日薪</div>
                            <div className="text-lg font-bold text-emerald-300">{fmt(daily)}</div>
                        </div>
                    </header>

                    {/* 輸入區域 */}
                    <div className="flex-1 grid grid-cols-2 gap-2 overflow-y-auto pb-2 content-start">
                        <div className="col-span-2 text-[11px] font-bold text-slate-400 px-1 mt-1 flex items-center gap-1">
                            <Icon name="briefcase" size={12} /> 營收追蹤 (可輸負數)
                        </div>
                        <MiniInput label="童裝淨毛利" value={finances.main} icon="store" color="text-blue-500" onChange={v => handleFin('main', v)} />
                        <MiniInput label="寵物展收益" value={finances.pet} icon="pie-chart" color="text-orange-500" onChange={v => handleFin('pet', v)} />
                        <MiniInput label="Q3美顏飲" value={finances.beauty} icon="bar-chart-3" color="text-pink-500" onChange={v => handleFin('beauty', v)} />
                        <MiniInput label="比特幣損益" value={finances.btc} icon="bitcoin" color="text-yellow-600" onChange={v => handleFin('btc', v)} />
                        <MiniInput label="台股損益" value={finances.tw} icon="trending-up" color="text-green-600" onChange={v => handleFin('tw', v)} />
                        <MiniInput label="美股損益" value={finances.us} icon="globe" color="text-indigo-600" onChange={v => handleFin('us', v)} />

                        <div className="col-span-2 text-[11px] font-bold text-slate-400 px-1 mt-3 flex items-center gap-1 border-t border-slate-200 pt-3">
                            <Icon name="calendar" size={12} /> 時間分配
                        </div>
                        <MiniInput label="工作總天數" value={days.work} icon="calendar" color="text-emerald-500" unit="天" onChange={v => handleDay('work', v)} />
                        <MiniInput label="出國拿貨" value={days.source} icon="package" color="text-amber-500" unit="天" onChange={v => handleDay('source', v)} />
                        <div className="col-span-2">
                            <MiniInput label="出國旅遊天數" value={days.travel} icon="plane" color="text-cyan-500" unit="天" onChange={v => handleDay('travel', v)} />
                        </div>
                    </div>

                    {/* 底部狀態欄 */}
                    <footer className="mt-2 bg-slate-800 rounded-xl p-3 text-white flex justify-between items-center flex-shrink-0">
                        <div className="flex flex-col">
                            <span className="text-[10px] text-slate-400 font-bold uppercase">投資/主業比</span>
                            <span className="text-sm font-bold">
                                {finances.main === 0 ? '0' : (( (finances.btc + finances.tw + finances.us) / finances.main ) * 100).toFixed(0)}%
                            </span>
                        </div>
                        <div className="text-right">
                            <div className="text-[10px] text-slate-500 font-medium italic">2025 Financial Tracker</div>
                            <div className="text-[9px] text-slate-400 italic">Data updates in real-time</div>
                        </div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

